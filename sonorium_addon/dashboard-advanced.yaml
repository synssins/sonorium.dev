# =============================================================================
# Sonorium Advanced Dashboard for Home Assistant
# =============================================================================
#
# This dashboard provides native Home Assistant controls for Sonorium using
# REST commands and template sensors.
#
# PREREQUISITES:
# Add the following to your configuration.yaml and restart Home Assistant:
#
# =============================================================================
# configuration.yaml additions:
# =============================================================================
#
# rest_command:
#   sonorium_create_session:
#     url: "http://homeassistant.local:8009/v2/sessions"
#     method: POST
#     content_type: "application/json"
#     payload: >
#       {
#         "theme_id": "{{ theme_id }}",
#         "speaker_group_id": "{{ group_id | default('') }}",
#         "volume": {{ volume | default(50) }}
#       }
#
#   sonorium_play_session:
#     url: "http://homeassistant.local:8009/v2/sessions/{{ session_id }}/play"
#     method: POST
#     content_type: "application/json"
#     payload: '{"theme_id": "{{ theme_id | default(\\'\\') }}"}'
#
#   sonorium_stop_session:
#     url: "http://homeassistant.local:8009/v2/sessions/{{ session_id }}/stop"
#     method: POST
#
#   sonorium_pause_session:
#     url: "http://homeassistant.local:8009/v2/sessions/{{ session_id }}/pause"
#     method: POST
#
#   sonorium_stop_all:
#     url: "http://homeassistant.local:8009/v2/sessions/stop-all"
#     method: POST
#
#   sonorium_set_volume:
#     url: "http://homeassistant.local:8009/v2/sessions/{{ session_id }}/volume"
#     method: POST
#     content_type: "application/json"
#     payload: '{"volume": {{ volume }}}'
#
#   sonorium_delete_session:
#     url: "http://homeassistant.local:8009/v2/sessions/{{ session_id }}"
#     method: DELETE
#
# rest:
#   - resource: "http://homeassistant.local:8009/api/status"
#     scan_interval: 30
#     sensor:
#       - name: "Sonorium Status"
#         value_template: "{{ value_json.version }}"
#         json_attributes:
#           - current_theme
#           - themes
#           - v2_enabled
#           - sessions
#           - active_channels
#
#   - resource: "http://homeassistant.local:8009/v2/sessions"
#     scan_interval: 10
#     sensor:
#       - name: "Sonorium Sessions"
#         value_template: "{{ value_json | length }}"
#         json_attributes_path: "$"
#         json_attributes:
#           - "[:].id"
#           - "[:].theme_id"
#           - "[:].state"
#
#   - resource: "http://homeassistant.local:8009/api/themes"
#     scan_interval: 300
#     sensor:
#       - name: "Sonorium Themes"
#         value_template: "{{ value_json.themes | length }}"
#         json_attributes:
#           - themes
#
# =============================================================================

title: Sonorium
views:
  # ============================================
  # Main Control View
  # ============================================
  - title: Ambient Sound
    path: ambient
    icon: mdi:music-circle
    cards:
      # Header
      - type: markdown
        content: |
          # üéµ Sonorium
          Ambient soundscapes for your home

      # Status Overview
      - type: horizontal-stack
        cards:
          - type: entity
            entity: sensor.sonorium_status
            name: Version
            icon: mdi:information

          - type: entity
            entity: sensor.sonorium_sessions
            name: Active Sessions
            icon: mdi:playlist-music

          - type: entity
            entity: sensor.sonorium_themes
            name: Themes
            icon: mdi:folder-music

      # Quick Actions
      - type: horizontal-stack
        cards:
          - type: button
            name: Stop All
            icon: mdi:stop-circle
            icon_height: 40px
            tap_action:
              action: call-service
              service: rest_command.sonorium_stop_all
            style: |
              ha-card {
                background-color: rgba(244, 67, 54, 0.2);
              }

          - type: button
            name: Open Sonorium
            icon: mdi:open-in-new
            icon_height: 40px
            tap_action:
              action: url
              url_path: "http://homeassistant.local:8009"

      # Embedded UI
      - type: iframe
        url: "http://homeassistant.local:8009"
        aspect_ratio: "16:9"
        title: Sonorium Control Panel

  # ============================================
  # Quick Play View - Favorite Themes
  # ============================================
  - title: Quick Play
    path: quick
    icon: mdi:play-circle
    cards:
      - type: markdown
        content: |
          # üé∂ Quick Play
          Tap a theme to start playing

      # Example theme buttons - customize with your actual theme IDs
      - type: horizontal-stack
        cards:
          - type: button
            name: Rain
            icon: mdi:weather-rainy
            icon_height: 50px
            tap_action:
              action: call-service
              service: rest_command.sonorium_create_session
              data:
                theme_id: "rain"
                volume: 50

          - type: button
            name: Forest
            icon: mdi:pine-tree
            icon_height: 50px
            tap_action:
              action: call-service
              service: rest_command.sonorium_create_session
              data:
                theme_id: "forest"
                volume: 50

          - type: button
            name: Ocean
            icon: mdi:waves
            icon_height: 50px
            tap_action:
              action: call-service
              service: rest_command.sonorium_create_session
              data:
                theme_id: "ocean"
                volume: 50

      - type: horizontal-stack
        cards:
          - type: button
            name: Fireplace
            icon: mdi:fireplace
            icon_height: 50px
            tap_action:
              action: call-service
              service: rest_command.sonorium_create_session
              data:
                theme_id: "fireplace"
                volume: 40

          - type: button
            name: City
            icon: mdi:city
            icon_height: 50px
            tap_action:
              action: call-service
              service: rest_command.sonorium_create_session
              data:
                theme_id: "city"
                volume: 30

          - type: button
            name: White Noise
            icon: mdi:sine-wave
            icon_height: 50px
            tap_action:
              action: call-service
              service: rest_command.sonorium_create_session
              data:
                theme_id: "white_noise"
                volume: 60

      # Stop All Button
      - type: button
        name: Stop All Playback
        icon: mdi:stop
        icon_height: 40px
        tap_action:
          action: call-service
          service: rest_command.sonorium_stop_all

  # ============================================
  # Room-Based View
  # ============================================
  - title: By Room
    path: rooms
    icon: mdi:home
    cards:
      - type: markdown
        content: |
          # üè† Room Controls
          Control ambient sound by room

      # Example room cards - customize with your speaker groups
      - type: vertical-stack
        title: Living Room
        cards:
          - type: horizontal-stack
            cards:
              - type: button
                name: Play Rain
                icon: mdi:weather-rainy
                tap_action:
                  action: call-service
                  service: rest_command.sonorium_create_session
                  data:
                    theme_id: "rain"
                    group_id: "living_room"
                    volume: 40

              - type: button
                name: Play Forest
                icon: mdi:pine-tree
                tap_action:
                  action: call-service
                  service: rest_command.sonorium_create_session
                  data:
                    theme_id: "forest"
                    group_id: "living_room"
                    volume: 40

      - type: vertical-stack
        title: Bedroom
        cards:
          - type: horizontal-stack
            cards:
              - type: button
                name: Sleep Sounds
                icon: mdi:sleep
                tap_action:
                  action: call-service
                  service: rest_command.sonorium_create_session
                  data:
                    theme_id: "sleep"
                    group_id: "bedroom"
                    volume: 30

              - type: button
                name: White Noise
                icon: mdi:sine-wave
                tap_action:
                  action: call-service
                  service: rest_command.sonorium_create_session
                  data:
                    theme_id: "white_noise"
                    group_id: "bedroom"
                    volume: 40

      - type: vertical-stack
        title: Office
        cards:
          - type: horizontal-stack
            cards:
              - type: button
                name: Focus
                icon: mdi:brain
                tap_action:
                  action: call-service
                  service: rest_command.sonorium_create_session
                  data:
                    theme_id: "focus"
                    group_id: "office"
                    volume: 35

              - type: button
                name: Coffee Shop
                icon: mdi:coffee
                tap_action:
                  action: call-service
                  service: rest_command.sonorium_create_session
                  data:
                    theme_id: "coffee_shop"
                    group_id: "office"
                    volume: 25
